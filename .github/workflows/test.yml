name: Run tests

on:
  pull_request:
    types: labeled

jobs:
  test:
    if: ${{ github.event.label.name == 'test' }}
    runs-on: self-hosted
    steps:
        - name: Checkout repository
          uses: actions/checkout@v3
        - name: Install pods
          run: pod install
        - name: Set permission for executing test script
          run: chmod +x ./.github/scripts/test.sh
        - name: Run tests
          run: ./.github/scripts/test.sh
        - uses: kishikawakatsumi/xcresulttool@v1
          with:
            path: edu-appTests.xcresult
          if: success() || failure()
        #- name: Comment PR
        #  uses: thollander/actions-comment-pull-request@v2
        #  with:
        #    message: "Hello !!!"